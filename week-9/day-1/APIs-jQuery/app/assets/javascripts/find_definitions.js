// Write Javascript here to handle the click for that button/link
$(document).ready(function() {
  $(".find-definitions").on("click", function() {
    // Get the term from the form
    var term = $("#term_name").val()
    $.getJSON("/definitions/show_def", { term: term }, function(results) {
      // do work here

      // results is now an array of each of the possible results

      if (results.length === 0) {
        $(".found-definitions").html('<div class="alert alert-danger" role="alert">Ooops, did not find any definitions for ' + term + '</div>')
      } else {
        // Clear out the found defintions and reset to an empty list
        $(".found-definitions").html("<ul class='list-group'></ul>")

        // Add header to the <ul>
        $(".found-definitions ul").append("<li class='list-group-item list-group-item-success'>Found these definitions, generated by JavaScript on the client<span class='badge'>" + results.length + "</span></li>")

        // JavaScript enumerate over results
        results.forEach(function(result) {
          // Append each li to the end of the ul
          $(".found-definitions ul").append("<li class='list-group-item'>" + result + "</li>")
        })
      }
    })
  })

  $(".found-definitions").on("click", "li", function() {
    var selected_def = $(this).text()
    $('#term_definition').val(selected_def)
  })
})
